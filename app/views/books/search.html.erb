<div class="container">
  <div class="row">
    <%= form_tag(books_search_path, method: :get) do %>
      <%= text_field_tag :title, @title %>
      <%= button_tag "検索", type: "submit" %>
    <% end %>
  </div>

  <div class="row">
    <div class="col-md-12">
      <table class="table" style="border: 1px solid black;">
        <thead>
          <th style="border: 1px solid black;">タイトル</th>
          <th style="border: 1px solid black;">著者</th>
          <th style="border: 1px solid black;">出版日</th>
          <th style="border: 1px solid black;"></th>
        </thead>
        <tbody>
          <% if current_user && @books.present? %>
            <% @books.each do |book| %>
              <tr>
                <td style="border: 1px solid black;">
                  <% if book.image_url.present? %>
                    <%= image_tag book.image_url, width: 128, height: 188 %>
                  <% else %>
                    <%= image_tag "no_image.jpg", width: 128, height: 188 %>
                  <% end %>
                </td>
                <td style="border: 1px solid black; text-align: center;">
                  <%= book.title %>
                  <br>
                  <%= book.author %>
                  <br>
                  <%= book.publisherName %>
                </td>
                <td style="border: 1px solid black; text-align: center;">
                  <%= book.salesDate %>
                </td>
                <td style="border: 1px solid black; text-align: center;">
                  <%= form_with(model: @bookshelf, url: bookshelf_index_path, method: :post) do |f| %>
                    <%= f.hidden_field :book_id, value: book.id %>
                    <%= f.submit "本棚に入れる", class: "btn btn-success" %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%= render 'layouts/footer' %>
